@model SearchBoxModel

<form asp-route="ProductSearch" method="get" id="small-search-box-form">
    <div class="search__wrapper">
        @if (Model.ShowSearchBox)
        {
            <div class="search-box">
                <div class="search-field__wrap is-relative">
                    <div class="search-location">
                        <div class="booking__field is-relative">
                            <svg version="1.1" viewBox="0 0 15 15" class="mr--12 svg-icon svg-fill" style="width: 14px; height: 14px;"><g stroke="#919191" stroke-width="2" fill="none" fill-rule="evenodd"><path pid="0" d="M10 10l4 4"></path><circle pid="1" cx="6.5" cy="6.5" r="5.5"></circle></g></svg>
                            <div class="booking__input">
                                <input type="text" class="booking__input-text bold" id="small-searchterms" autocomplete="off" name="q" placeholder="@T("Search.SearchBox.Tooltip")" aria-label="@T("Search.SearchBox.Text.Label")" />
                            </div>
                            <svg version="1.1" viewBox="0 0 12 12" class="icon--12 pointer svg-icon svg-fill" style="margin-left: 5px; display: none;"><defs><path fill="#ccc" stroke="none" pid="0" id="svgicon_close-icon_a" d="M6 4.586L10.182.404a.5.5 0 01.707 0l.707.707a.5.5 0 010 .707L7.414 6l4.182 4.182a.5.5 0 010 .707l-.707.707a.5.5 0 01-.707 0L6 7.414l-4.182 4.182a.5.5 0 01-.707 0l-.707-.707a.5.5 0 010-.707L4.586 6 .404 1.818a.5.5 0 010-.707L1.11.404a.5.5 0 01.707 0L6 4.586z"></path></defs><use fill="#FFF" fill-rule="evenodd" xlink:href="#svgicon_close-icon_a"></use></svg> <!---->
                        </div>
                    </div>
                    <div class="search-date mt--12 mt--md--0">
                        <div class="booking__field">
                            <svg version="1.1" viewBox="0 0 14 16" class="mr--12 svg-icon svg-fill" style="width: 14px; height: 16px;"><path pid="0" d="M9 2V1a1 1 0 112 0v1a3 3 0 013 3v8a3 3 0 01-3 3H3a3 3 0 01-3-3V5a3 3 0 013-3V1a1 1 0 112 0v1h4zM2 7v6a1 1 0 001 1h8a1 1 0 001-1V7H2z" fill="#666" fill-rule="evenodd"></path></svg> <div class="date-search-button">
                                <div class="datepicker-range">
                                    <button id="trigger-date-range" class="btn btn-outline--gray btn-xs search-filter__button">
                                        @T("Search.EnterDates")
                                    </button> 
                                </div>
                            </div>
                        </div>
                    </div> <div id="search-guest-button" class="search-guest mt--12 mt--md--0 cursor">
                        <div class="booking__field is-relative">
                            <svg version="1.1" viewBox="0 0 16 16" class="mr--12 svg-icon svg-fill" style="width: 14px; height: 14px;"><path pid="0" d="M8 8a4 4 0 110-8 4 4 0 010 8zm0 1c4.926 0 7.59 1.966 7.995 5.898A1.002 1.002 0 0114.994 16H1.006a1.003 1.003 0 01-1-1.102C.408 10.966 3.073 9 8 9z" fill="#666" fill-rule="evenodd"></path></svg> <div class="booking__input">
                                <div>
                                    <div data-v-0ae22c83="">
                                        <span data-v-0ae22c83="">
                                            <div role="tooltip" id="el-popover-9339" aria-hidden="true" class="el-popover el-popper" tabindex="0" style="width: 320px; display: none;"><!----> <div data-v-0ae22c83="" class="select-number"><div data-v-0ae22c83="" class="select-number__title"><p data-v-0ae22c83="" class="mb--0 semi-bold">Người lớn</p></div> <div data-v-0ae22c83="" class="el-input-number"><span role="button" class="el-input-number__decrease is-disabled"><i class="el-icon-minus"></i></span><span role="button" class="el-input-number__increase"><i class="el-icon-plus"></i></span><div class="el-input"><!----><input type="text" autocomplete="off" max="100" min="0" class="el-input__inner" role="spinbutton" aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" aria-disabled="undefined"><!----><!----><!----></div></div></div> <div data-v-0ae22c83="" class="select-number mt--18"><div data-v-0ae22c83="" class="select-number__title"><p data-v-0ae22c83="" class="mb--0 semi-bold">Trẻ em</p> <p data-v-0ae22c83="" class="mb--0 p--small-2 c-gray-5">Tuổi từ 2–12</p></div> <div data-v-0ae22c83="" class="el-input-number"><span role="button" class="el-input-number__decrease is-disabled"><i class="el-icon-minus"></i></span><span role="button" class="el-input-number__increase"><i class="el-icon-plus"></i></span><div class="el-input"><!----><input type="text" autocomplete="off" max="100" min="0" class="el-input__inner" role="spinbutton" aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" aria-disabled="undefined"><!----><!----><!----></div></div></div> <div data-v-0ae22c83="" class="select-number mt--18"><div data-v-0ae22c83="" class="select-number__title"><p data-v-0ae22c83="" class="mb--0 semi-bold">Trẻ sơ sinh</p> <p data-v-0ae22c83="" class="mb--0 p--small-2 c-gray-5">Dưới 2 tuổi</p></div> <div data-v-0ae22c83="" class="el-input-number"><span role="button" class="el-input-number__decrease is-disabled"><i class="el-icon-minus"></i></span><span role="button" class="el-input-number__increase"><i class="el-icon-plus"></i></span><div class="el-input"><!----><input type="text" autocomplete="off" max="20" min="0" class="el-input__inner" role="spinbutton" aria-valuemax="20" aria-valuemin="0" aria-valuenow="0" aria-disabled="undefined"><!----><!----><!----></div></div></div> <div data-v-0ae22c83="" class="is-flex align-center jbetween mt--30"><button data-v-0ae22c83="" class="cursor bold">Xoá</button> <button data-v-0ae22c83="" class="cursor bold c-primary">Áp dụng</button></div></div><div data-v-0ae22c83="" class="modal-booking-time el-popover__reference" aria-describedby="el-popover-9339" tabindex="0">
                                                <p data-v-0ae22c83="" class="cursor">
                                                    @T("Search.EnterGuests")
                                                </p>
                                            </div>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="submit" id="search-btn" class="booking__btn btn btn--secondary bold mt--12 mt--md--0">
                    <svg version="1.1" viewBox="0 0 15 15" class="svg-icon svg-fill" style="width: 14px; height: 14px;"><g stroke="#FFF" stroke-width="2" fill="none" fill-rule="evenodd"><path pid="0" d="M10 10l4 4"></path><circle pid="1" cx="6.5" cy="6.5" r="5.5"></circle></g></svg>
                </button>
                @*<button type="submit" class="button-1 search-box-button">@T("Search.Button")</button>*@
            </div>
            @if (Model.AutoCompleteEnabled)
            {
    <script asp-location="Footer">
                $(document).ready(function() {
                    var showLinkToResultSearch;
                    var searchText;
                    $('#small-searchterms').autocomplete({
                            delay: 500,
                            minLength: @(Model.SearchTermMinimumLength.ToString()),
                            source: '@(Url.RouteUrl("ProductSearchAutoComplete"))',
                            appendTo: '.search-box',
                            select: function(event, ui) {
                                $("#small-searchterms").val(ui.item.label);
                                setLocation(ui.item.producturl);
                                return false;
                        },
                        //append link to the end of list
                        open: function(event, ui) {
                            //display link to search page
                            if (showLinkToResultSearch) {
                                searchText = document.getElementById("small-searchterms").value;
                                $(".ui-autocomplete").append("< li class=\"ui-menu-item\" role=\"presentation\"><a href=\"/search?q=" + searchText + "\">@T("Search.SearchBox.SearchPageLink")</a></li>");
                            }
                        }
                    })
                        .data("ui-autocomplete")._renderItem = function (ul, item) {
                            var provinceImg = "<svg version=\"1.1\" viewBox=\"0 0 42 48\" class=\"icon--16 svg-icon svg-fill\"><path pid=\"0\" d=\"M14.6 1.4C3.2 5.6-2.1 16.4 1.4 28.3c1.9 6.6 8.4 14.2 15 17.8l4.6 2.4 4.6-2.4c10.2-5.4 17.5-17.9 16-27.3-.8-4.7-3.6-10.6-6.2-12.9C29.8 1 20.9-.9 14.6 1.4zm15.2 7.3c6.1 4.4 7.8 13.3 4.1 21C31.6 34.4 23.7 42 21 42c-2.7 0-10.6-7.6-13-12.6C3.9 21 6.5 11.7 14.1 7.7c4.3-2.3 11.9-1.8 15.7 1z\"></path><path pid=\"1\" d=\"M17 13.3c-5.2 2.7-6.2 10.4-1.9 14.3 3 2.7 9.3 2.5 12.1-.4 3-2.9 3.1-9.4.3-12.2-2.6-2.6-7.4-3.4-10.5-1.7zm6.5 7.7c0 1.8-.6 2.6-2.3 2.8-1.3.2-2.5-.3-2.8-1.2-1-2.6.4-4.8 2.8-4.4 1.7.2 2.3 1 2.3 2.8z\"></path></svg>";
                            return $("<li></li>")
                                .data("item.autocomplete", item)
                                .append("<div class= \"thumb-suggestion\">" + ("productpictureurl" in item ? ("<img src=\" "+ item.productpictureurl +" \">") : (provinceImg)) + "</div>" +
                                    "<div class=\"search-suggest__item-text\">"+
                                "<p class=\"text-ellipsis\" title=" + item.label + ">" + item.label + "</p>" +
                                @*"<small>" + (item.avaiablelocation.toString() ? (item.avaiablelocation.toString() + " Chỗ ở") : (item.location)) + "</small>" +*@
                                "<small>" + (item.location ? (item.location) : (item.avaiablelocation.toString() + " Chỗ ở")) + "</small>" +
                                    "</div>")
                            .appendTo(ul);
                        };
                });
    </script>
            }
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.SearchBox })
        }
    </div>
</form>
